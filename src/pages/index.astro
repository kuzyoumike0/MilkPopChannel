---
import BaseLayout from "../layouts/BaseLayout.astro";

const base = import.meta.env.BASE_URL;

// ✅ ここを「あなたのYouTube動画ID」に差し替えるだけでOK
// 例）URLが https://www.youtube.com/watch?v=ABCDEFGHIJK の場合 → id: "ABCDEFGHIJK"
const videos = [
  // ✅ ここを「あなたのYouTube動画ID」に差し替えるだけでOK
  // 例）URLが https://www.youtube.com/watch?v=ABCDEFGHIJK の場合 → id: "ABCDEFGHIJK"
  // dur は「再生時間バッジ（手動）」です（APIなし簡易）
  {
    id: "dQw4w9WgXcQ",
    title: "最新MV：歌ってみた 01（仮）",
    note: "歌ってみた",
    dur: "3:24",
  },
  {
    id: "3JZ_D3ELwOQ",
    title: "最新MV：オリジナル 01（仮）",
    note: "オリジナル",
    dur: "4:10",
  },
  {
    id: "kxopViU98Xo",
    title: "最新MV 01 — タイトル（仮）",
    note: "MV",
    dur: "3:05",
  },
  {
    id: "9bZkp7q19f0",
    title: "最新MV：歌ってみた 02（仮）",
    note: "歌ってみた",
    dur: "3:12",
  },
  {
    id: "fJ9rUzIMcZQ",
    title: "最新MV：オリジナル 02（仮）",
    note: "オリジナル",
    dur: "3:48",
  },
  {
    id: "tAGnKpE4NCI",
    title: "最新MV 02 — タイトル（仮）",
    note: "MV",
    dur: "2:59",
  },
];

const ytWatch = (id) => `https://www.youtube.com/watch?v=${id}`;
const ytEmbed = (id) => `https://www.youtube.com/embed/${id}`;
const ytThumb = (id) => `https://i.ytimg.com/vi/${id}/hqdefault.jpg`;

// ページHUDの章表示（このページ内3セクション想定）
const pageChapters = [
  { page: "01", label: "Cover" },
  { page: "02", label: "Contents" },
  { page: "03", label: "Afterword" },
];
---

<BaseLayout title="物語を聞く場所" description="うさぎカフェの物語を聴きに来てね。">
  <!-- 右下：ページ番号＋Chapter表示 -->
  <div class="pageHUD" aria-hidden="true">
    <div class="pageHUDInner">
      <span class="pageLabel">Page</span>
      <span id="pageNow" class="pageNow">01</span>
      <span class="pageSlash">/</span>
      <span id="pageTotal" class="pageTotal">03</span>
      <span class="pageDot">•</span>
      <span id="pageChap" class="pageChap">Cover</span>
    </div>
  </div>

  <!-- ===== Cover ===== -->
  <section class="cover" data-page="01" data-chapter="Cover">
    <div class="coverInner">
      <p class="overline">MilkPop Channel — Reading Café Edition</p>
      <h1 class="coverTitle">物語を読む場所</h1>
      <p class="lead">
        静かな灯りと、紙の温度。<br />
        ここで出会うのは、物語を生きる者たち。
      </p>

      <div class="actions">
        <!-- しおり（リボン） -->
        <a class="bookmark" href={`${base}people#p01`}>
          <span class="bookmarkText">Open the book</span>
          <span class="bookmarkSub">— People</span>
        </a>

        <a class="ghost" href="#toc">Table of contents</a>
      </div>

      <div class="turnPage">
        <span class="turnText">Turn the page</span>
        <span class="turnArrow">↓</span>
      </div>
    </div>
  </section>

  <!-- ===== TOC ===== -->
  <section id="toc" class="toc" data-page="02" data-chapter="Contents">
    <div class="wrap">
      <h2 class="secTitle">最新MV</h2>

      <!-- ✅ YouTube player + thumbnails -->
      <div class="ytToc" id="ytToc">
        <div class="ytPlayer">
          <div class="ytFrame">
            <iframe
              id="ytFrame"
              title="MilkPop video"
              src={`${ytEmbed(videos[0].id)}?rel=0`}
              loading="lazy"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
            ></iframe>

            <!-- ✅ スワイプ検出用（iframe上は取れないので下端だけ） -->
            <div class="ytSwipeZone" aria-hidden="true"></div>

            <!-- ✅ 左右ボタン（常時表示・端でdisabled） -->
            <button class="ytNav ytPrev" type="button" aria-label="前のMV">‹</button>
            <button class="ytNav ytNext" type="button" aria-label="次のMV">›</button>
          </div>

          <div class="ytMeta">
            <div id="ytTitle" class="ytTitle">{videos[0].title}</div>
            <div id="ytNote" class="ytNote">{videos[0].note}</div>
            <a
              id="ytLink"
              class="ytLink"
              href={ytWatch(videos[0].id)}
              target="_blank"
              rel="noreferrer"
            >
              YouTubeで開く →
            </a>
          </div>
        </div>

        <!-- ✅ 横並び（横スクロール）サムネ列 -->
        <div class="ytRow" aria-label="YouTube links">
          {videos.map((v) => (
            <a
              class="ytCard"
              href={ytWatch(v.id)}
              data-ytid={v.id}
              data-title={v.title}
              data-note={v.note}
              data-dur={v.dur}
              aria-label={`${v.title} を再生`}
            >
              <div class="ytThumb">
                <img src={ytThumb(v.id)} alt={v.title} loading="lazy" />
                <span class="ytPlay" aria-hidden="true">▶</span>
                <span class="ytDur" aria-hidden="true">{v.dur}</span>
              </div>
              <div class="ytCardBody">
                <div class="ytCardTitle">{v.title}</div>
                <div class="ytCardNote">{v.note}</div>
              </div>
            </a>
          ))}
        </div>
      </div>

      <div class="tocFooter">
        <p class="tocCopy">
          ページを閉じても、物語は続いていく。<br />
          続きをめくるなら、しおりの場所へ。
        </p>

        <a class="bookmark small" href={`${base}people`}>
          <span class="bookmarkText">Go to People</span>
          <span class="bookmarkSub">— Cast</span>
        </a>
      </div>
    </div>
  </section>

  <!-- ✅ YouTube selector (fade) + 常時ナビ + 端で止める + スワイプ -->
  <script is:inline>
    (() => {
      const root = document.getElementById("ytToc");
      const frame = document.getElementById("ytFrame");
      const title = document.getElementById("ytTitle");
      const note = document.getElementById("ytNote");
      const link = document.getElementById("ytLink");
      const prevBtn = document.querySelector(".ytNav.ytPrev");
      const nextBtn = document.querySelector(".ytNav.ytNext");
      const cards = Array.from(document.querySelectorAll(".ytCard[data-ytid]"));
      const swipeZone = document.querySelector(".ytSwipeZone");
      if (!root || !frame || !title || !note || !link || !cards.length) return;

      // ✅ ループしない（端で止める）
      const clamp = (i) => Math.max(0, Math.min(cards.length - 1, i));

      const setNowBadge = (activeId) => {
        cards.forEach((c) => c.classList.toggle("isActive", c.dataset.ytid === activeId));
      };

      const setNavState = () => {
        if (prevBtn) prevBtn.disabled = currentIndex <= 0;
        if (nextBtn) nextBtn.disabled = currentIndex >= cards.length - 1;
      };

      let lock = false;
      let currentIndex = 0;

      const swap = (id, t, n, autoplay) => {
        frame.src = `https://www.youtube.com/embed/${id}?${autoplay ? "autoplay=1&" : ""}rel=0`;
        title.textContent = t || "";
        note.textContent = n || "";
        link.href = `https://www.youtube.com/watch?v=${id}`;
        setNowBadge(id);
        setNavState();
      };

      const setByIndex = (idx, autoplay = true) => {
        currentIndex = clamp(idx);
        const c = cards[currentIndex];
        swap(c.dataset.ytid, c.dataset.title, c.dataset.note, autoplay);
      };

      const playWithFadeIndex = (idx, autoplay = true) => {
        if (lock) return;
        idx = clamp(idx);
        if (idx === currentIndex) return;

        lock = true;
        root.classList.add("isFading");

        window.setTimeout(() => setByIndex(idx, autoplay), 160);

        window.setTimeout(() => {
          root.classList.remove("isFading");
          lock = false;
        }, 320);
      };

      const playWithFadeCard = (card, autoplay = true) => {
        const idx = cards.indexOf(card);
        if (idx < 0) return;
        playWithFadeIndex(idx, autoplay);
      };

      cards.forEach((c) => {
        c.addEventListener("click", (e) => {
          e.preventDefault();
          playWithFadeCard(c, true);
        });
      });

      const prev = () => playWithFadeIndex(currentIndex - 1, true);
      const next = () => playWithFadeIndex(currentIndex + 1, true);

      prevBtn && prevBtn.addEventListener("click", prev);
      nextBtn && nextBtn.addEventListener("click", next);

      // Keyboard（このセクションが見えてる/フォーカス近い時だけ）
      window.addEventListener("keydown", (e) => {
        const active = document.activeElement;
        const inToc = root.contains(active) || active === document.body;
        if (!inToc) return;
        if (e.key === "ArrowLeft") { e.preventDefault(); prev(); }
        if (e.key === "ArrowRight") { e.preventDefault(); next(); }
      });

      // Swipe（APIなし簡易）
      // ✅ iframe上はイベントが取れないので「プレイヤー下端のスワイプゾーン」&「サムネ列」で拾う
      const attachSwipe = (el) => {
        if (!el) return;
        let startX = 0;
        let startY = 0;

        el.addEventListener("touchstart", (e) => {
          const t = e.touches && e.touches[0];
          if (!t) return;
          startX = t.clientX;
          startY = t.clientY;
        }, { passive: true });

        el.addEventListener("touchend", (e) => {
          const t = e.changedTouches && e.changedTouches[0];
          if (!t) return;
          const dx = t.clientX - startX;
          const dy = t.clientY - startY;

          // 縦スクロール誤爆を減らす
          if (Math.abs(dx) < 60) return;
          if (Math.abs(dy) > 80) return;

          if (dx > 0) prev();
          else next();
        }, { passive: true });
      };

      attachSwipe(swipeZone);
      attachSwipe(root.querySelector(".ytRow"));

      // Init
      currentIndex = 0;
      setByIndex(0, false);
      setNavState();
    })();
  </script>

  <!-- ===== Afterword ===== -->
  <section class="afterword" data-page="03" data-chapter="Afterword">
    <div class="wrap narrow">
      <h2 class="secTitle">あとがき</h2>

      <p class="para">
        ここは、読む場所。<br />
        同時に、誰かが生きている場所。
      </p>
      <p class="para">
        正しさよりも、余韻。<br />
        派手さよりも、静かな熱。
      </p>

      <div class="paperLine"></div>

      <div class="endRow">
        <a class="ghost" href="#toc">Back to contents</a>
        <a class="bookmark small" href={`${base}people#p01`}>
          <span class="bookmarkText">Open the next page</span>
          <span class="bookmarkSub">— People</span>
        </a>
      </div>
    </div>
  </section>

  <!-- ===== HUD updater（Page + Chapter） ===== -->
  <script is:inline>
    (() => {
      const sections = Array.from(document.querySelectorAll("section[data-page]"));
      const nowEl = document.getElementById("pageNow");
      const totalEl = document.getElementById("pageTotal");
      const chapEl = document.getElementById("pageChap");
      if (!sections.length || !nowEl || !totalEl || !chapEl) return;

      totalEl.textContent = String(sections.length).padStart(2, "0");

      const setNow = (idx) => {
        const n = idx + 1;
        nowEl.textContent = String(n).padStart(2, "0");
        chapEl.textContent = sections[idx].dataset.chapter || "";
      };

      const update = () => {
        const mid = window.innerHeight * 0.5;
        let bestIdx = 0;
        let bestDist = Infinity;

        for (let i = 0; i < sections.length; i++) {
          const r = sections[i].getBoundingClientRect();
          const center = r.top + r.height * 0.5;
          const dist = Math.abs(center - mid);
          if (dist < bestDist) {
            bestDist = dist;
            bestIdx = i;
          }
        }
        setNow(bestIdx);
      };

      let raf = 0;
      const onScroll = () => {
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(update);
      };

      window.addEventListener("scroll", onScroll, { passive: true });
      window.addEventListener("resize", onScroll, { passive: true });
      update();
    })();
  </script>

  <style>
    :global(body){ background:#070709; color:#e9e9ef; }
    :global(.pastel-bg){ display:none; }
    :global(main){ padding: 0 0 40px; }

    .wrap{
      width: min(1200px, calc(100% - 40px));
      margin: 0 auto;
      padding: 46px 0 64px;
    }
    .wrap.narrow{ width: min(860px, calc(100% - 40px)); }
    .secTitle{
      margin: 0 0 18px;
      text-align:center;
      font-weight: 900;
      letter-spacing:.18em;
      font-size: 18px;
    }
    .paperLine{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(243,208,138,.25), transparent);
      margin: 22px 0;
    }

    /* ===== Page HUD ===== */
    .pageHUD{
      position: fixed;
      right: 14px;
      bottom: 14px;
      z-index: 1200;
      pointer-events: none;
      opacity: .85;
    }
    .pageHUDInner{
      display:flex;
      align-items: baseline;
      gap: 8px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.28);
      backdrop-filter: blur(6px);
    }
    .pageLabel{
      font-size: 10px;
      letter-spacing: .18em;
      color: rgba(233,233,239,.55);
    }
    .pageNow, .pageTotal{
      font-size: 12px;
      letter-spacing: .12em;
      font-weight: 900;
      color: rgba(243,208,138,.95);
    }
    .pageSlash{ color: rgba(233,233,239,.45); font-size: 11px; }
    .pageDot{ color: rgba(233,233,239,.35); }
    .pageChap{
      font-size: 10px;
      letter-spacing: .18em;
      color: rgba(233,233,239,.62);
      text-transform: uppercase;
    }

    /* ===== Cover texture (page shadow) ===== */
    .cover{
      min-height: 90vh;
      display:flex;
      align-items:center;
      border-bottom: 1px solid rgba(255,255,255,.12);
      position: relative;
      overflow: hidden;
      background:
        radial-gradient(1200px 600px at 50% 18%, rgba(243,208,138,.10), transparent 60%),
        radial-gradient(900px 500px at 10% 82%, rgba(255,255,255,.06), transparent 65%),
        linear-gradient(180deg, rgba(7,7,9,1), rgba(7,7,9,.98));
    }
    .cover::before{
      content:"";
      position:absolute;
      inset:-20px;
      pointer-events:none;
      background:
        linear-gradient(90deg,
          transparent 0%,
          rgba(0,0,0,.00) 46%,
          rgba(0,0,0,.25) 50%,
          rgba(0,0,0,.00) 54%,
          transparent 100%),
        linear-gradient(90deg,
          rgba(255,255,255,.03) 0%,
          transparent 25%,
          rgba(255,255,255,.02) 50%,
          transparent 75%,
          rgba(255,255,255,.03) 100%);
      opacity: .35;
      mix-blend-mode: screen;
    }

    .coverInner{
      width: min(980px, calc(100% - 40px));
      margin: 0 auto;
      padding: 72px 0;
      text-align:center;
    }
    .overline{
      margin: 0 0 10px;
      font-size: 10px;
      letter-spacing:.26em;
      color: rgba(233,233,239,.62);
      text-transform: uppercase;
    }
    .coverTitle{
      margin: 0 0 10px;
      font-weight: 900;
      letter-spacing:.10em;
      font-size: clamp(34px, 5vw, 52px);
      color: rgba(243,208,138,.95);
      text-shadow: 0 12px 40px rgba(0,0,0,.55);
    }
    .lead{
      margin: 0 auto 22px;
      max-width: 620px;
      line-height: 1.95;
      font-size: 14px;
      letter-spacing:.08em;
      color: rgba(233,233,239,.78);
    }

    .actions{
      display:flex;
      justify-content:center;
      gap: 12px;
      flex-wrap: wrap;
      margin-top: 12px;
    }
    .ghost{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 8px;
      height: 44px;
      padding: 0 16px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.04);
      color: rgba(233,233,239,.82);
      text-decoration:none;
      font-weight: 800;
      letter-spacing:.10em;
      transition: transform .16s ease, background .16s ease, border-color .16s ease;
    }
    .ghost:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.06);
      border-color: rgba(243,208,138,.28);
    }

    .bookmark{
      position: relative;
      display:inline-flex;
      flex-direction: column;
      align-items:center;
      justify-content:center;
      height: 44px;
      padding: 0 16px;
      border-radius: 999px;
      border: 1px solid rgba(243,208,138,.35);
      background: rgba(243,208,138,.08);
      color: rgba(243,208,138,.98);
      text-decoration:none;
      font-weight: 900;
      letter-spacing:.12em;
      box-shadow: 0 16px 42px rgba(0,0,0,.45);
      transition: transform .16s ease, filter .16s ease;
    }
    .bookmark:hover{
      transform: translateY(-1px);
      filter: brightness(1.06);
    }
    .bookmarkText{ font-size: 12px; line-height: 1; }
    .bookmarkSub{ font-size: 10px; opacity: .74; margin-top: 4px; letter-spacing: .18em; }
    .bookmark.small{ height: 40px; padding: 0 14px; }

    .turnPage{
      margin-top: 28px;
      display:flex;
      flex-direction: column;
      align-items:center;
      gap: 6px;
      opacity: .70;
      user-select:none;
    }
    .turnText{
      font-size: 10px;
      letter-spacing:.22em;
      text-transform: uppercase;
      color: rgba(233,233,239,.60);
    }
    .turnArrow{
      font-size: 18px;
      color: rgba(243,208,138,.85);
      animation: bounce 1.4s ease-in-out infinite;
    }
    @keyframes bounce{
      0%,100%{ transform: translateY(0); }
      50%{ transform: translateY(6px); }
    }

    /* ===== TOC section ===== */
    .toc{
      border-bottom: 1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(900px 520px at 50% 12%, rgba(243,208,138,.07), transparent 60%),
        radial-gradient(800px 520px at 20% 80%, rgba(255,255,255,.05), transparent 65%),
        linear-gradient(180deg, rgba(7,7,9,.98), rgba(7,7,9,1));
    }

    .ytToc{
      margin-top: 10px;
      transition: opacity .22s ease, transform .22s ease;
    }
    .ytToc.isFading{
      opacity: .0;
      transform: translateY(2px);
    }

    .ytPlayer{
      width: min(980px, 100%);
      margin: 0 auto;
    }

    .ytFrame{
      position: relative;
      border-radius: 18px;
      overflow:hidden;
      box-shadow: 0 22px 60px rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.35);
    }
    .ytFrame iframe{
      width: 100%;
      aspect-ratio: 16 / 9;
      display:block;
      border: 0;
      background:#000;
    }

    /* ✅ スワイプ検出用（下端のみ） */
    .ytSwipeZone{
      position:absolute;
      left:0;
      right:0;
      bottom:0;
      height:26px;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,.10));
      border-bottom-left-radius: 18px;
      border-bottom-right-radius: 18px;
      cursor: grab;
      touch-action: pan-y;
    }

    .ytMeta{
      margin: 12px 0 0;
      text-align:center;
    }
    .ytTitle{
      font-weight: 900;
      letter-spacing: .12em;
      color: rgba(243,208,138,.95);
      font-size: 14px;
    }
    .ytNote{
      margin-top: 6px;
      font-size: 12px;
      letter-spacing: .10em;
      color: rgba(233,233,239,.72);
    }
    .ytLink{
      display:inline-block;
      margin-top: 10px;
      font-size: 12px;
      letter-spacing: .12em;
      color: rgba(233,233,239,.78);
      text-decoration:none;
      border-bottom: 1px solid rgba(243,208,138,.28);
      padding-bottom: 2px;
    }
    .ytLink:hover{ color: rgba(243,208,138,.95); }

    /* 横並びサムネ列 */
    .ytRow{
      width: min(980px, 100%);
      margin: 16px auto 0;
      display:flex;
      gap: 12px;
      overflow-x:auto;
      padding-bottom: 10px;
      scroll-snap-type: x mandatory;
    }
    .ytCard{
      min-width: 220px;
      max-width: 220px;
      flex: 0 0 auto;
      display:flex;
      flex-direction: column;
      text-decoration:none;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      overflow:hidden;
      scroll-snap-align: start;
      transition: transform .16s ease, border-color .16s ease, background .16s ease;
      position: relative;
    }
    .ytCard:hover{
      transform: translateY(-1px);
      border-color: rgba(243,208,138,.24);
      background: rgba(255,255,255,.05);
    }

    .ytThumb{
      position: relative;
      background:#000;
    }
    .ytThumb img{
      width: 100%;
      display:block;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      filter: saturate(1.05);
    }
    .ytPlay{
      position:absolute;
      left: 10px;
      bottom: 10px;
      width: 28px;
      height: 28px;
      border-radius: 999px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.65);
      border: 1px solid rgba(255,255,255,.18);
      color: rgba(255,255,255,.92);
      font-size: 12px;
    }
    .ytDur{
      position:absolute;
      right: 10px;
      bottom: 10px;
      padding: 2px 6px;
      border-radius: 6px;
      background: rgba(0,0,0,.72);
      border: 1px solid rgba(255,255,255,.18);
      color: rgba(255,255,255,.92);
      font-size: 11px;
      letter-spacing:.08em;
    }

    .ytCardBody{
      padding: 10px 10px 12px;
      display:flex;
      flex-direction: column;
      gap: 6px;
    }
    .ytCardTitle{
      font-weight: 900;
      letter-spacing:.10em;
      color: rgba(233,233,239,.90);
      font-size: 12px;
      line-height: 1.35;
    }
    .ytCardNote{
      font-size: 11px;
      letter-spacing:.10em;
      color: rgba(233,233,239,.62);
    }

    .tocFooter{
      margin-top: 26px;
      text-align:center;
    }
    .tocCopy{
      margin: 0 auto 12px;
      max-width: 620px;
      text-align:center;
      font-size: 13px;
      letter-spacing: .10em;
      line-height: 1.9;
      color: rgba(233,233,239,.74);
    }

    .endRow{
      display:flex;
      justify-content:center;
      gap: 12px;
      flex-wrap: wrap;
      align-items:center;
      margin-top: 10px;
    }

    @media (max-width: 640px){
      .pageHUD{ opacity: .70; }
      .ytCard{ min-width: 200px; max-width: 200px; }
    }

    /* ===== YouTube TOC enhancements: prev/next + active badge + fade ===== */
    .ytFrame{ position: relative; }
    .ytNav{
      position:absolute;
      top:50%;
      transform: translateY(-50%);
      width:42px; height:42px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(0,0,0,.55);
      color: rgba(233,233,239,.92);
      font-size: 26px;
      line-height: 40px;
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
      box-shadow: 0 10px 30px rgba(0,0,0,.35);
      transition: transform .16s ease, filter .16s ease, background .16s ease, opacity .16s ease;
      opacity: 1;
      pointer-events:auto;
    }
    .ytPrev{ left: 10px; }
    .ytNext{ right: 10px; }

    /* 常時表示なので hover で出す処理は廃止（focusは見えるように） */
    .ytNav:focus-visible{
      outline: 2px solid rgba(243,208,138,.55);
      outline-offset: 2px;
    }
    .ytNav:hover{ filter: brightness(1.12); transform: translateY(-50%) scale(1.03); }
    .ytNav:active{ transform: translateY(-50%) scale(.98); }
    .ytNav:disabled{
      opacity: .28;
      cursor: default;
      filter: none;
      transform: translateY(-50%);
    }

    .ytCard{ position: relative; }
    .ytCard.isActive{
      outline: 1px solid rgba(243,208,138,.55);
      outline-offset: 2px;
    }
    .ytCard.isActive::after{
      content: "NOW";
      position:absolute;
      top: 10px;
      right: 10px;
      font-size: 10px;
      letter-spacing:.18em;
      font-weight: 900;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(243,208,138,.14);
      border: 1px solid rgba(243,208,138,.28);
      color: rgba(243,208,138,.95);
    }

    /* ===== Afterword ===== */
    .afterword{
      background:
        radial-gradient(900px 520px at 50% 0%, rgba(243,208,138,.06), transparent 60%),
        linear-gradient(180deg, rgba(7,7,9,1), rgba(7,7,9,.985));
    }
    .para{
      margin: 0 auto 14px;
      max-width: 620px;
      text-align:center;
      font-size: 14px;
      letter-spacing:.10em;
      line-height: 2.0;
      color: rgba(233,233,239,.78);
    }

    /* ===== motion reduce ===== */
    @media (prefers-reduced-motion: reduce){
      .bookmark{ transition:none !important; }
      .turnArrow{ animation: none !important; }
      .ytToc{ transition:none !important; }
      .ytNav{ transition:none !important; }
      .ytCard{ transition:none !important; }
    }
  </style>
</BaseLayout>
